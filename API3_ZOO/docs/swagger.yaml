basePath: /
definitions:
  controllers.LoginRequest:
    properties:
      password:
        type: string
      username:
        type: string
    type: object
  models.User:
    properties:
      id:
        type: integer
      image:
        description: imagen codificada base64
        type: string
      imageType:
        description: 'tipo MIME (ej: image/png)'
        type: string
      role:
        type: string
      username:
        type: string
      zona:
        type: string
    type: object
info:
  contact: {}
  description: API que gestiona usuarios, roles y autenticación con JWT. PARA PODER
    USAR LOS METODOS SE NECESITARA UN TOKEN EL CUAL UNA VEZ OBTENIDO SE INSERTARA
    EN EL APARTADO DE AUTHORIZE MAS ESPECIFICO EL BOTON VERDE DE ABAJO CON UN CANDADO
    INSERTAR EL TOKEN EN EL APARTADO VALUE Y PULSAR EL BOTON DE AUTHORIZE UNA VEZ
    HECHO ESO DEBERIA DE PODER CERRAR LA VENTANA SIN PROBLEMAS Y USAR LOS METODOS
    DE AHORA EN ADELANTE
  title: API de Gestión de Usuarios y Roles
  version: "1.0"
paths:
  /delete/{id}:
    delete:
      description: Elimina un usuario de la base de datos (requiere rol dev)
      parameters:
      - description: ID del usuario
        in: path
        name: id
        required: true
        type: integer
      produces:
      - text/plain
      responses:
        "200":
          description: Usuario eliminado
          schema:
            type: string
        "401":
          description: Error de autorización
          schema:
            type: string
        "500":
          description: Error al eliminar usuario
          schema:
            type: string
      security:
      - JWTQuery: []
      summary: Eliminar usuario
      tags:
      - users
  /login:
    post:
      consumes:
      - application/json
      description: Autentica un usuario y devuelve un token JWT
      parameters:
      - description: Credenciales de usuario
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/controllers.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - JWTQuery: []
      summary: Iniciar sesión
      tags:
      - auth
  /register:
    post:
      consumes:
      - application/json
      description: Crea un nuevo usuario en la base de datos
      parameters:
      - description: Datos del nuevo usuario
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/models.User'
      produces:
      - text/plain
      responses:
        "201":
          description: Usuario creado
          schema:
            type: string
        "400":
          description: Error al registrar usuario
          schema:
            type: string
        "401":
          description: No autorizado
          schema:
            type: string
      security:
      - JWTQuery: []
      summary: Registrar nuevo usuario
      tags:
      - users
  /update/{id}:
    put:
      consumes:
      - application/json
      description: Actualiza los datos de un usuario existente (requiere rol dev)
      parameters:
      - description: ID del usuario
        in: path
        name: id
        required: true
        type: integer
      - description: Datos actualizados
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/models.User'
      produces:
      - text/plain
      responses:
        "200":
          description: Usuario actualizado
          schema:
            type: string
        "401":
          description: Error de autorización
          schema:
            type: string
        "404":
          description: Usuario no encontrado
          schema:
            type: string
      security:
      - JWTQuery: []
      summary: Actualizar usuario
      tags:
      - users
  /users:
    get:
      description: Retorna todos los usuarios registrados (requiere rol admin)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.User'
            type: array
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - JWTQuery: []
      summary: Obtener todos los usuarios
      tags:
      - users
securityDefinitions:
  JWTQuery:
    description: 'Ingresa el token JWT como parámetro de consulta, por ejemplo: ?token=<tu_token>'
    in: query
    name: token
    type: apiKey
swagger: "2.0"
